<div class="header">
	<a class="btn btn-link pull-left" onclick="window.history.back()"><i class="glyphicon glyphicon-chevron-left"></i></a>
	<h2>Settings</h2>
</div>

<div class="box col-md-5">
    <br />    
    <h4>Current storage configuration</h4>

    <ul>
        <li>
            <input type="radio" ng-click="vm.switchToPanelConfig($event)" ng-model="vm.storageOption" value="(localStorage)" />&nbsp;<strong>Local storage</strong>
            <br /><small>The configuration is saved for this browser and device only. It will be kept as long as you don't clean up the browser's historical data.
            <br /><a href="#/settings/localconfig">Edit the local panel configuration (experts only)</a></small>
            <br /><br />
        </li>
        <li ng-if="useRegistry" ng-repeat="(name, data) in vm.panelsRegistry">
            <a class="pull-right" ng-if="vm.storageOption != name" ng-click="vm.deletePanelConfig(name)"><i class="glyphicon glyphicon-trash"></i></a> 
            <input type="radio" ng-click="vm.switchToPanelConfig($event)" ng-model="vm.storageOption" value="{{name}}" />&nbsp;<strong>Panel configuration: <em>{{name}}</em></strong>
            <br /><small>Last synced on {{data.updatedTime | date:'EEE d MMM HH:mm:ss'}}</small>
            <div>Contains:</div>
            <ul>
                <li ng-repeat="dashboard in data.dashboards">
                    {{dashboard.name}}
                </li>
            </ul>
            <br /><br />
        </li>
    </ul>
    <a ng-if="vm.useRegistry" ng-click="vm.saveAsNewPanelConfig()"><i class="glyphicon glyphicon-save">&nbsp;</i>Save the current configuration to a new panel configuration</a>
    <div ng-if="!vm.useRegistry" class="alert alert-warning">Panel configurations are not available: not running openHAB 2 or service not installed?</div>

    <br />
    <br />
</div>

<div class="col-md-2"></div>


<div class="box col-md-5">
    <br />
    <h4>Miscellaneous Settings</h4>

    <h5>Theme</h5>
    <select class="form-control" ng-change="vm.saveOptions()" ng-model="settings.theme" ng-options="theme.id as theme.name for theme in vm.themes"></select>
    <br />
    <br />
    <h5>Background image</h5>
    <input type="text" class="form-control" ng-blur="vm.saveOptions()" ng-model="vm.background_image" placeholder="Example: //source.unsplash.com/random" />
    <br />
    <br />
</div>

<br />
<br />
